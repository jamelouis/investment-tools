(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[905],{43231:function(e,t,a){Promise.resolve().then(a.bind(a,14846))},14846:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ee}});var l=a(11601),n=a(6459),r=a(99550),s=a(45124),o=a(61835),i=a(19779),d=a(78639);let c=[{title:"日期",dataIndex:"date",render:e=>(0,l.jsx)("a",{children:e}),sorter:(e,t)=>e.date.localeCompare(t.date)},{title:"市值",dataIndex:"value"},{title:"PE",dataIndex:"pe",render:e=>e.toFixed(2),sorter:(e,t)=>e.pe-t.pe},{title:"PB",dataIndex:"pb",render:e=>e.toFixed(2),sorter:(e,t)=>e.pb-t.pb}];var u=e=>{let{data:t,onSelected:a,selectedRowKeys:n,setSelectedRowKeys:r}=e;if(null===t)return(0,l.jsx)(l.Fragment,{children:"loading"});let s=t.map((e,t)=>(e.key=t,e));return(0,l.jsx)("div",{children:(0,l.jsx)(d.Z,{rowSelection:{type:"checkbox",onChange:(e,t)=>{a(t),r(e)},selectedRowKeys:n},columns:c,dataSource:s})})},p=a(68060),m=a(55135);let{RangePicker:h}=p.default,{Title:x,Text:f}=m.default;var y=e=>{let{onFilter:t}=e,[a,r]=(0,n.useState)(null),[i,d]=(0,n.useState)(null);return(0,l.jsxs)(s.Z,{direction:"horizontal",size:16,children:[(0,l.jsx)(h,{value:a||i,onCalendarChange:e=>r(e),onChange:e=>d(e),onOpenChange:e=>{e?r([null,null]):r(null)}}),(0,l.jsx)(o.ZP,{type:"primary",onClick:()=>{console.log(i),t(i)},children:"Search"})]})},v=e=>{let{name:t,data:a,onOk:r}=e,[d,c]=(0,n.useState)(!1),[p,m]=(0,n.useState)(null),[h,x]=(0,n.useState)([]),[f,v]=(0,n.useState)(a);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(o.ZP,{type:"primary",onClick:()=>{c(!0),v(a)},disabled:null==a,children:t}),(0,l.jsx)(i.Z,{title:"选取交易",open:d,onOk:()=>{c(!1),r(p),x([])},onCancel:()=>{c(!1),x([])},children:(0,l.jsxs)(s.Z,{direction:"vertical",size:16,children:[(0,l.jsx)(y,{onFilter:e=>{if(null!=e){let t=e.map(e=>e.format("YYYY/MM/DD"));v(a.filter(e=>e.date.localeCompare(t[0])>0&&0>=e.date.localeCompare(t[1])))}}}),(0,l.jsx)(u,{data:f,onSelected:e=>{m(e)},selectedRowKeys:h,setSelectedRowKeys:x})]})})]})},b=a(82719),j=a(64762),g=a(25613);let{Option:_}=b.default;var D=e=>{let{dataSource:t,setDataSource:a}=e,[r,s]=(0,n.useState)(!1),[c,u]=(0,n.useState)("save"),[p,m]=(0,n.useState)(""),[h,x]=(0,n.useState)([]),[f,y]=(0,n.useState)(""),v=(0,n.useCallback)(()=>{x(Object.keys(localStorage).filter(e=>e.startsWith("table_")).map(e=>e.replace("table_","")))},[]);return(0,n.useEffect)(()=>{v()},[v]),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,l.jsx)(o.ZP,{onClick:()=>{u("save"),s(!0)},children:"Save"}),(0,l.jsx)(o.ZP,{onClick:()=>{u("load"),s(!0),v()},children:"Load"}),(0,l.jsx)(o.ZP,{danger:!0,onClick:()=>a([]),children:"Reset"})]}),(0,l.jsx)(d.Z,{dataSource:t,columns:[{title:"买入日期",dataIndex:"date_at_buy",key:"date_at_buy"},{title:"买入值",dataIndex:"value_at_buy",key:"value_at_buy"},{title:"买入PE",dataIndex:"pe_at_buy",key:"pe_at_buy",render:e=>e.toFixed(2)},{title:"卖出日期",dataIndex:"date_at_sell",key:"date_at_sell"},{title:"卖出值",dataIndex:"value_at_sell",key:"value_at_sell"},{title:"卖出PE",dataIndex:"pe_at_sell",key:"pe_at_sell",render:e=>e.toFixed(2)},{title:"总收益率",dataIndex:"totalGain",key:"totalGain",render:e=>"".concat((100*e).toFixed(2),"%")},{title:"年化收益率",dataIndex:"annualizedReturn",key:"annualizedReturn",render:e=>"".concat((100*e).toFixed(2),"%")}]}),(0,l.jsx)(i.Z,{title:"save"===c?"Save table":"Load table",open:r,onOk:()=>{if("save"===c)localStorage.setItem("table_".concat(p),JSON.stringify(t)),j.ZP.success('Saved table as "'.concat(p,'"')),m(""),v();else if("load"===c){let e=localStorage.getItem("table_".concat(f));e&&(a(JSON.parse(e)),j.ZP.success('Loaded table "'.concat(f,'"')))}s(!1)},onCancel:()=>{s(!1),m(""),y("")},children:"save"===c?(0,l.jsx)(g.Z,{value:p,onChange:e=>m(e.target.value),placeholder:"Enter a name for this table"}):(0,l.jsx)(b.default,{style:{width:"100%"},placeholder:"Select an item to load",onChange:e=>y(e),children:h.map(e=>(0,l.jsx)(_,{value:e,children:e},e))})})]})},Y=a(27798),S=a.n(Y),w=()=>(0,l.jsx)(o.ZP,{onClick:()=>{S()(document.body).then(e=>{let t=document.createElement("a");t.href=e.toDataURL("image/png"),t.download="page-screenshot.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)})},children:"Export Page as Image"}),C=a(94164),k=a(96228),Z=a.n(k);let{RangePicker:P}=p.default;var F=e=>{let{open:t,onClose:a,onDateRangeChange:r}=e,[s,o]=(0,n.useState)({startDate:Z()().startOf("year").format("YYYY-MM-DD"),endDate:Z()().format("YYYY-MM-DD")});return(0,l.jsx)(i.Z,{centered:!0,open:t,onOk:()=>{r(s.startDate,s.endDate),a()},onCancel:a,children:(0,l.jsx)(P,{presets:[{label:"近10年",value:[Z()().subtract(10,"year"),Z()()]},{label:"近30年",value:[Z()().subtract(30,"year"),Z()()]},{label:"近50年",value:[Z()().subtract(50,"year"),Z()()]}],defaultValue:[Z()(s.startDate),Z()(s.endDate)],value:[Z()(s.startDate),Z()(s.endDate)],onChange:(e,t)=>{o({startDate:t[0],endDate:t[1]})}})})},M=a(33938),N=a.n(M),E=e=>{let{timeFrame:t,onTimeFrameChange:a,onDateRangeChange:r}=e,[o,i]=(0,n.useState)(!1),d=e=>{let t,a;if("current"===e)t=N()().startOf("year").format("YYYY-MM-DD"),a=N()().format("YYYY-MM-DD");else if("custom"===e){i(!0);return}else{let l=parseInt(e);t=N()().subtract(l,"year").format("YYYY-MM-DD"),a=N()().format("YYYY-MM-DD")}r(t,a)};return(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsxs)(s.Z,{children:[(0,l.jsxs)(C.ZP.Group,{onChange:e=>a(e.target.value),value:t,style:{marginBottom:"20px"},children:[(0,l.jsx)(C.ZP.Button,{value:"day",children:"Day"}),(0,l.jsx)(C.ZP.Button,{value:"month",children:"Month"}),(0,l.jsx)(C.ZP.Button,{value:"year",children:"Year"})]}),(0,l.jsxs)(C.ZP.Group,{defaultValue:"current",onChange:e=>d(e.target.value),style:{marginBottom:"20px"},children:[(0,l.jsx)(C.ZP.Button,{value:"current",children:"今年"}),(0,l.jsx)(C.ZP.Button,{value:"1Y",children:"近1年"}),(0,l.jsx)(C.ZP.Button,{value:"3Y",children:"近3年"}),(0,l.jsx)(C.ZP.Button,{value:"5Y",children:"近5年"}),(0,l.jsx)(C.ZP.Button,{value:"custom",children:"自定义"})]})]}),(0,l.jsx)(F,{open:o,onClose:()=>i(!1),onDateRangeChange:r})]})};let O=(e,t,a)=>({title:{title:"This is the title of chart.",style:{align:"center"}},data:e,xField:"date",legend:{position:"bottom"},children:[{type:"line",yField:"value",shapeField:"smooth",style:{lineWidth:2,opacity:.5},axis:{y:{position:"right",title:"value",style:{titleFill:"#5B8FF9"}}}},{type:"line",yField:"pe",shapeField:"smooth",style:{stroke:"#5AD8A6",lineWidth:1,opacity:1},axis:{y:{title:"pe",style:{titleFill:"#5AD8A6"}}}}],interaction:{tooltip:!0},onReady:e=>{let{chart:l}=e,n=null;l.on("plot:click",e=>{if(n&&n.data){let e=t.current.findIndex(e=>e.date===(null==n?void 0:n.data.x)),l=t.current[e+1];l&&a([l])}}),l.on("tooltip:show",e=>{n=e.data})}}),I=e=>{let t=new Date(e),a=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return"".concat(a,"/").concat(l,"/").concat(n)},R=e=>Object.values(e.reduce((e,t)=>{let a=new Date(t.date),l="".concat(a.getFullYear(),"-").concat(String(a.getMonth()+1).padStart(2,"0"));return e[l]||(e[l]=[]),e[l].push(t),e},{})).map(e=>e[0]).reverse(),B=e=>Object.values(e.reduce((e,t)=>{let a=new Date(t.date).getFullYear();return e[a]||(e[a]=[]),e[a].push(t),e},{})).map(e=>e[0]).reverse(),T=(e,t,a,l)=>({totalGain:(l-t)/t,annualizedReturn:Math.pow(l/t,1/((a.getTime()-e.getTime())/315576e5))-1}),L=()=>{let[e,t]=(0,n.useState)(null),[a,l]=(0,n.useState)(!1),[r,s]=(0,n.useState)(null),o=(0,n.useCallback)(e=>{l(!0),s(null);let t=new FileReader;t.onload=t=>{try{let a=t.target.result;if(e.name.endsWith(".json")){let t=JSON.parse(a);i(e.name,t.data||t)}else if(e.name.endsWith(".csv"));else throw Error("Unsupported file type. Please use JSON or CSV.")}catch(e){s(e.message)}finally{l(!1)}},t.onerror=()=>{s("Failed to read the file."),l(!1)},t.readAsText(e)},[]),i=(e,a)=>{let l=a.map(e=>({date:I(e.date),value:parseFloat(e.cp||e.value),pe:parseFloat(e["pe_ttm.mcw"]||e.pe),pb:parseFloat(e["pb.mcw"]||e.pb)}));l.sort((e,t)=>new Date(t.date)-new Date(e.date)),t({name:e,months:R(l),years:B(l),days:l.reverse()})};return{data:e,isLoading:a,error:r,loadFile:o}};var z=a(31681),A=a(52578);a(60806);let{Dragger:G}=z.default;var W=e=>{let{onFileLoad:t}=e;return(0,l.jsx)("div",{className:"max-w-3xl file-upload",children:(0,l.jsxs)(G,{name:"file",accept:".json,.csv",showUploadList:!1,customRequest:e=>{let{file:t,onSuccess:a}=e;setTimeout(()=>{a("ok")},0)},onChange:e=>{let{status:a}=e.file;if("uploading"!==a&&console.log(e.file,e.fileList),"done"===a){j.ZP.success("".concat(e.file.name," file uploaded successfully."));let a=e.file.originFileObj;a&&t(a)}else"error"===a&&j.ZP.error("".concat(e.file.name," file upload failed."))},children:[(0,l.jsx)("p",{className:"ant-upload-drag-icon",children:(0,l.jsx)(A.Z,{})}),(0,l.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,l.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]})})},J=a(18464),V=e=>{let{author:t,title:a,href:n,summary:r}=e;return(0,l.jsxs)("div",{className:"block p-4 mb-8 max-w-3xl rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 bg-white border border-gray-200",children:[(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsx)(J.default,{src:"/value-application.jpg",alt:"Value Application",width:400,height:300,layout:"responsive"})}),(0,l.jsxs)("a",{href:n,children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-blue-600 hover:underline mb-2 page-header",children:a}),(0,l.jsxs)("p",{className:"text-sm text-gray-600 top-nav",children:["By ",(0,l.jsx)("span",{className:"font-medium",children:t})]})]}),r.map((e,t)=>(0,l.jsx)("p",{className:"mt-4 text-xl text-gray-1000",children:e},t)),(0,l.jsxs)("p",{className:"text-center mt-4 text-sm text-gray-400",children:["由",(0,l.jsx)("a",{className:"text-blue-400",href:"",children:"kimi"}),"归纳总结"]})]})},U=a(54905),K=a(26123),q=a(37866),H=a(20493);a(108);let Q=(0,H.v)({showProgress:!0,steps:[{element:"h2",popover:{title:"工具缘起",description:"估值工具来源于该文章内容"}},{element:".top-nav",popover:{title:"Title",description:"Description"}},{element:".file-upload",popover:{title:"上传文件",description:"点击按钮，在目录中选取数据文件上床；或者选中数据文件，拖到文件上传区域。"}},{element:".footer",popover:{title:"Title",description:"Description"}}]});function X(){Q.drive()}var $=()=>{let[e,t]=(0,n.useState)(!1),[a,o]=(0,n.useState)("month"),[i,d]=(0,n.useState)(N()().startOf("year").format("YYYY-MM-DD")),[c,u]=(0,n.useState)(N()().format("YYYY-MM-DD")),[p,m]=(0,n.useState)([]),h=(0,n.useRef)(),x=(0,n.useRef)(),{data:f,isLoading:y,error:b,loadFile:j}=L(),g=e=>{let t=h.current[h.current.length-1];if(!t)return;let a=e.map(e=>({date_at_buy:e.date,value_at_buy:e.value,pe_at_buy:e.pe,date_at_sell:t.date,value_at_sell:t.value,pe_at_sell:t.pe}));m([...x.current,...a].map((e,t)=>{let{totalGain:a,annualizedReturn:l}=T(new Date(e.date_at_buy),e.value_at_buy,new Date(e.date_at_sell),e.value_at_sell);return{...e,key:t,totalGain:a,annualizedReturn:l}}).sort((e,t)=>e.date_at_buy.localeCompare(t.date_at_buy)))};if(y)return(0,l.jsx)("p",{children:"Loading..."});if(b)return(0,l.jsxs)("p",{children:["Error: ",b]});let _=f?"day"===a?f.days:"month"===a?f.months:f.years:null,Y=[{date:Z()().startOf("year").format("YYYY/MM/DD"),cp:4699.28,r_cp:5720.56,"pe_ttm.mcw":20.11136649001735,"pe_ttm.ew":21.940524482101246,"pe_ttm.ewpvo":17.698597523399144,"pb.mcw":1.484985393822744,"pb.ew":1.4332208526319397,"pb.ewpvo":1.4302235236340082,mc:10639657240324.55,cmc:9388589915425,fb:274139555821,sb:4897281943.249999,stockCode:"000905"},{date:Z()().format("YYYY/MM/DD"),cp:4699.28,r_cp:5720.56,"pe_ttm.mcw":20.11136649001735,"pe_ttm.ew":21.940524482101246,"pe_ttm.ewpvo":17.698597523399144,"pb.mcw":1.484985393822744,"pb.ew":1.4332208526319397,"pb.ewpvo":1.4302235236340082,mc:10639657240324.55,cmc:9388589915425,fb:274139555821,sb:4897281943.249999,stockCode:"000905"}],S=_?_.filter(e=>new Date(e.date)>new Date(i)):Y;h.current=S,x.current=p;let C=O(S,h,g);return(0,l.jsxs)("div",{className:"min-h-screen mx-auto max-w-xl md:max-w-3xl",children:[(0,l.jsx)(K.Z,{icon:(0,l.jsx)(U.Z,{}),type:"primary",style:{insetInlineEnd:24},onClick:X}),(0,l.jsx)(q.Z,{style:{borderColor:"#7cb305"},children:"参考文章"}),(0,l.jsx)(V,{author:"ETF拯救世界",title:"估值对于投资同一个指数，到底有多大的作用？",href:"https://weibo.com/p/1001603901079514384913",summary:["这篇文章通过分析中证500指数过去十年的市盈率（PE）数据，探讨了估值对长期投资收益的影响。文章指出，尽管过去十年中证500的年化收益率高达23%，但这种高收益并非普遍现象，而是起始于一个极度低估的时期。作者认为，估值是决定长期收益的关键因素。","文章通过选取中证500历史上PE最高和最低的月份，以及一个平均PE的月份，对比了从这些不同估值水平买入后的收益率。结果显示，低估值买入可以带来至少20%以上的年化收益率，甚至在某些情况下高达35%。相反，高估值买入的长期收益可能不如债券。","作者强调，耐心等待低估时机买入，而不是在高估时急于抢反弹，是实现长期稳定收益的策略。文章最后提到，当前中证500的PE为45，比十年平均PE高出17%，认为这不是一个理想的买入时机，建议投资者继续等待更合理的价格。","总结来说，文章的核心观点是：估值对长期投资收益有重大影响，投资者应耐心等待低估值时机，以实现更高的年化收益率。"]}),(0,l.jsx)(q.Z,{style:{borderColor:"#7cb305"},children:"输入数据"}),(0,l.jsx)(W,{onFileLoad:e=>{j(e),t(!0)}}),(0,l.jsx)(q.Z,{style:{borderColor:"#7cb305"},children:"输出图表和表格"}),(0,l.jsx)(r.Z,{...C}),(0,l.jsx)(E,{timeFrame:a,onTimeFrameChange:e=>o(e),onDateRangeChange:(e,t)=>{d(e),u(t)}}),(0,l.jsxs)(s.Z,{size:"middle",children:[(0,l.jsx)(v,{name:"Add transactions",data:f?f.days:null,onOk:g}),(0,l.jsx)(w,{})]}),(0,l.jsx)(D,{dataSource:p,setDataSource:m})]})};function ee(){return(0,l.jsx)($,{})}}},function(e){e.O(0,[889,838,748,599,976,464,329,570,833,744],function(){return e(e.s=43231)}),_N_E=e.O()}]);