(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{8855:function(e,t,a){Promise.resolve().then(a.bind(a,5500))},5500:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return q}});var l=a(7437),n=a(2265),r=a(3848),s=a(6682),o=a(3288),i=a(9129),d=a(5941),c=a(6854);let u=[{title:"日期",dataIndex:"date",render:e=>(0,l.jsx)("a",{children:e}),sorter:(e,t)=>e.date.localeCompare(t.date)},{title:"市值",dataIndex:"value"},{title:"PE",dataIndex:"pe",render:e=>e.toFixed(2),sorter:(e,t)=>e.pe-t.pe},{title:"PB",dataIndex:"pb",render:e=>e.toFixed(2),sorter:(e,t)=>e.pb-t.pb}];var h=e=>{let{data:t,onSelected:a,selectedRowKeys:n,setSelectedRowKeys:r}=e;if(null===t)return(0,l.jsx)(l.Fragment,{children:"loading"});let s=t.map((e,t)=>(e.key=t,e));return(0,l.jsx)("div",{children:(0,l.jsx)(c.Z,{rowSelection:{type:"checkbox",onChange:(e,t)=>{a(t),r(e)},selectedRowKeys:n},columns:u,dataSource:s})})},p=a(5053),m=a(1484);let{RangePicker:x}=p.default,{Title:f,Text:y}=m.default;var j=e=>{let{onFilter:t}=e,[a,r]=(0,n.useState)(null),[i,d]=(0,n.useState)(null);return(0,l.jsxs)(o.Z,{direction:"horizontal",size:16,children:[(0,l.jsx)(x,{value:a||i,onCalendarChange:e=>r(e),onChange:e=>d(e),onOpenChange:e=>{e?r([null,null]):r(null)}}),(0,l.jsx)(s.ZP,{type:"primary",onClick:()=>{console.log(i),t(i)},children:"Search"})]})},g=e=>{let{name:t,data:a,onOk:r}=e,[i,c]=(0,n.useState)(!1),[u,p]=(0,n.useState)(null),[m,x]=(0,n.useState)([]),[f,y]=(0,n.useState)(a);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.ZP,{type:"primary",onClick:()=>{c(!0),y(a)},disabled:null==a,children:t}),(0,l.jsx)(d.Z,{title:"选取交易",open:i,onOk:()=>{c(!1),r(u),x([])},onCancel:()=>{c(!1),x([])},children:(0,l.jsxs)(o.Z,{direction:"vertical",size:16,children:[(0,l.jsx)(j,{onFilter:e=>{if(null!=e){let t=e.map(e=>e.format("YYYY/MM/DD"));y(a.filter(e=>e.date.localeCompare(t[0])>0&&0>=e.date.localeCompare(t[1])))}}}),(0,l.jsx)(h,{data:f,onSelected:e=>{p(e)},selectedRowKeys:m,setSelectedRowKeys:x})]})})]})},v=a(2100),b=a(8569),_=a(5325);let{Option:Y}=v.default;var D=e=>{let{dataSource:t,setDataSource:a}=e,[r,o]=(0,n.useState)(!1),[i,u]=(0,n.useState)("save"),[h,p]=(0,n.useState)(""),[m,x]=(0,n.useState)([]),[f,y]=(0,n.useState)(""),j=(0,n.useCallback)(()=>{x(Object.keys(localStorage).filter(e=>e.startsWith("table_")).map(e=>e.replace("table_","")))},[]);return(0,n.useEffect)(()=>{j()},[j]),(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,l.jsx)(s.ZP,{onClick:()=>{u("save"),o(!0)},children:"Save"}),(0,l.jsx)(s.ZP,{onClick:()=>{u("load"),o(!0),j()},children:"Load"}),(0,l.jsx)(s.ZP,{danger:!0,onClick:()=>a([]),children:"Reset"})]}),(0,l.jsx)(c.Z,{dataSource:t,columns:[{title:"买入日期",dataIndex:"date_at_buy",key:"date_at_buy"},{title:"买入值",dataIndex:"value_at_buy",key:"value_at_buy"},{title:"买入PE",dataIndex:"pe_at_buy",key:"pe_at_buy",render:e=>e.toFixed(2)},{title:"卖出日期",dataIndex:"date_at_sell",key:"date_at_sell"},{title:"卖出值",dataIndex:"value_at_sell",key:"value_at_sell"},{title:"卖出PE",dataIndex:"pe_at_sell",key:"pe_at_sell",render:e=>e.toFixed(2)},{title:"总收益率",dataIndex:"totalGain",key:"totalGain",render:e=>"".concat((100*e).toFixed(2),"%")},{title:"年化收益率",dataIndex:"annualizedReturn",key:"annualizedReturn",render:e=>"".concat((100*e).toFixed(2),"%")}]}),(0,l.jsx)(d.Z,{title:"save"===i?"Save table":"Load table",open:r,onOk:()=>{if("save"===i)localStorage.setItem("table_".concat(h),JSON.stringify(t)),b.ZP.success('Saved table as "'.concat(h,'"')),p(""),j();else if("load"===i){let e=localStorage.getItem("table_".concat(f));e&&(a(JSON.parse(e)),b.ZP.success('Loaded table "'.concat(f,'"')))}o(!1)},onCancel:()=>{o(!1),p(""),y("")},children:"save"===i?(0,l.jsx)(_.Z,{value:h,onChange:e=>p(e.target.value),placeholder:"Enter a name for this table"}):(0,l.jsx)(v.default,{style:{width:"100%"},placeholder:"Select an item to load",onChange:e=>y(e),children:m.map(e=>(0,l.jsx)(Y,{value:e,children:e},e))})})]})},S=a(7956),k=a.n(S),C=()=>(0,l.jsx)(s.ZP,{onClick:()=>{k()(document.body).then(e=>{let t=document.createElement("a");t.href=e.toDataURL("image/png"),t.download="page-screenshot.png",document.body.appendChild(t),t.click(),document.body.removeChild(t)})},children:"Export Page as Image"}),w=a(4052),P=a(2737),Z=a.n(P);let{RangePicker:F}=p.default;var M=e=>{let{open:t,onClose:a,onDateRangeChange:r}=e,[s,o]=(0,n.useState)({startDate:Z()().startOf("year").format("YYYY-MM-DD"),endDate:Z()().format("YYYY-MM-DD")});return(0,l.jsx)(d.Z,{centered:!0,open:t,onOk:()=>{r(s.startDate,s.endDate),a()},onCancel:a,children:(0,l.jsx)(F,{presets:[{label:"近10年",value:[Z()().subtract(10,"year"),Z()()]},{label:"近30年",value:[Z()().subtract(30,"year"),Z()()]},{label:"近50年",value:[Z()().subtract(50,"year"),Z()()]}],defaultValue:[Z()(s.startDate),Z()(s.endDate)],value:[Z()(s.startDate),Z()(s.endDate)],onChange:(e,t)=>{o({startDate:t[0],endDate:t[1]})}})})},N=a(9212),O=a.n(N),E=e=>{let{timeFrame:t,onTimeFrameChange:a,onDateRangeChange:r}=e,[s,i]=(0,n.useState)(!1),d=e=>{let t,a;if("current"===e)t=O()().startOf("year").format("YYYY-MM-DD"),a=O()().format("YYYY-MM-DD");else if("custom"===e){i(!0);return}else{let l=parseInt(e);t=O()().subtract(l,"year").format("YYYY-MM-DD"),a=O()().format("YYYY-MM-DD")}r(t,a)};return(0,l.jsxs)("div",{className:"flex items-center justify-center",children:[(0,l.jsxs)(o.Z,{children:[(0,l.jsxs)(w.ZP.Group,{onChange:e=>a(e.target.value),value:t,style:{marginBottom:"20px"},children:[(0,l.jsx)(w.ZP.Button,{value:"day",children:"Day"}),(0,l.jsx)(w.ZP.Button,{value:"month",children:"Month"}),(0,l.jsx)(w.ZP.Button,{value:"year",children:"Year"})]}),(0,l.jsxs)(w.ZP.Group,{defaultValue:"current",onChange:e=>d(e.target.value),style:{marginBottom:"20px"},children:[(0,l.jsx)(w.ZP.Button,{value:"current",children:"今年"}),(0,l.jsx)(w.ZP.Button,{value:"1Y",children:"近1年"}),(0,l.jsx)(w.ZP.Button,{value:"3Y",children:"近3年"}),(0,l.jsx)(w.ZP.Button,{value:"5Y",children:"近5年"}),(0,l.jsx)(w.ZP.Button,{value:"custom",children:"自定义"})]})]}),(0,l.jsx)(M,{open:s,onClose:()=>i(!1),onDateRangeChange:r})]})};let I=(e,t,a)=>({title:{title:"This is the title of chart.",style:{align:"center"}},data:e,xField:"date",legend:{position:"bottom"},children:[{type:"line",yField:"value",shapeField:"smooth",style:{lineWidth:2,opacity:.5},axis:{y:{position:"right",title:"value",style:{titleFill:"#5B8FF9"}}}},{type:"line",yField:"pe",shapeField:"smooth",style:{stroke:"#5AD8A6",lineWidth:1,opacity:1},axis:{y:{title:"pe",style:{titleFill:"#5AD8A6"}}}}],interaction:{tooltip:!0},onReady:e=>{let{chart:l}=e,n=null;l.on("plot:click",e=>{if(n&&n.data){let e=t.current.findIndex(e=>e.date===(null==n?void 0:n.data.x)),l=t.current[e+1];l&&a([l])}}),l.on("tooltip:show",e=>{n=e.data})}}),B=e=>{let t=new Date(e),a=t.getFullYear(),l=String(t.getMonth()+1).padStart(2,"0"),n=String(t.getDate()).padStart(2,"0");return"".concat(a,"/").concat(l,"/").concat(n)},R=e=>Object.values(e.reduce((e,t)=>{let a=new Date(t.date),l="".concat(a.getFullYear(),"-").concat(String(a.getMonth()+1).padStart(2,"0"));return e[l]||(e[l]=[]),e[l].push(t),e},{})).map(e=>e[0]).reverse(),L=e=>Object.values(e.reduce((e,t)=>{let a=new Date(t.date).getFullYear();return e[a]||(e[a]=[]),e[a].push(t),e},{})).map(e=>e[0]).reverse(),z=(e,t,a,l)=>({totalGain:(l-t)/t,annualizedReturn:Math.pow(l/t,1/((a.getTime()-e.getTime())/315576e5))-1}),A=()=>{let[e,t]=(0,n.useState)(null),[a,l]=(0,n.useState)(!1),[r,s]=(0,n.useState)(null),o=(0,n.useCallback)(e=>{l(!0),s(null);let t=new FileReader;t.onload=t=>{try{let a=t.target.result;if(e.name.endsWith(".json")){let e=JSON.parse(a),t="".concat(e.name," - ").concat(e.code);i(t,e.data||e)}else if(e.name.endsWith(".csv"));else throw Error("Unsupported file type. Please use JSON or CSV.")}catch(e){s(e.message)}finally{l(!1)}},t.onerror=()=>{s("Failed to read the file."),l(!1)},t.readAsText(e)},[]),i=(e,a)=>{let l=a.map(e=>({date:B(e.date),value:parseFloat(e.cp||e.value),pe:parseFloat(e["pe_ttm.mcw"]||e.pe),pb:parseFloat(e["pb.mcw"]||e.pb)}));l.sort((e,t)=>new Date(t.date)-new Date(e.date)),t({name:e,months:R(l),years:L(l),days:l.reverse()})};return{data:e,isLoading:a,error:r,loadFile:o}};var T=a(3153),G=a(3632);a(1071);let{Dragger:W}=T.default;var J=e=>{let{onFileLoad:t}=e;return(0,l.jsx)("div",{className:"max-w-3xl",children:(0,l.jsxs)(W,{name:"file",accept:".json,.csv",showUploadList:!1,customRequest:e=>{let{file:t,onSuccess:a}=e;setTimeout(()=>{a("ok")},0)},onChange:e=>{let{status:a}=e.file;if("uploading"!==a&&console.log(e.file,e.fileList),"done"===a){b.ZP.success("".concat(e.file.name," file uploaded successfully."));let a=e.file.originFileObj;a&&t(a)}else"error"===a&&b.ZP.error("".concat(e.file.name," file upload failed."))},children:[(0,l.jsx)("p",{className:"ant-upload-drag-icon",children:(0,l.jsx)(G.Z,{})}),(0,l.jsx)("p",{className:"ant-upload-text",children:"Click or drag file to this area to upload"}),(0,l.jsx)("p",{className:"ant-upload-hint",children:"Support for a single or bulk upload. Strictly prohibited from uploading company data or other banned files."})]})})},V=a(6648),U=e=>{let{author:t,title:a,href:n,summary:r}=e;return(0,l.jsxs)("div",{className:"block p-4 mb-8 max-w-3xl rounded-lg shadow-md hover:shadow-lg transition-shadow duration-300 bg-white border border-gray-200",children:[(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsx)(V.default,{src:"/value-application.jpg",alt:"Value Application",width:400,height:300,layout:"responsive"})}),(0,l.jsxs)("a",{href:n,children:[(0,l.jsx)("h2",{className:"text-xl font-semibold text-blue-600 hover:underline mb-2",children:a}),(0,l.jsxs)("p",{className:"text-sm text-gray-600",children:["By ",(0,l.jsx)("span",{className:"font-medium",children:t})]})]}),r.map((e,t)=>(0,l.jsx)("p",{className:"mt-4 text-xl text-gray-1000",children:e},t)),(0,l.jsxs)("p",{className:"text-center mt-4 text-sm text-gray-400",children:["由",(0,l.jsx)("a",{className:"text-blue-400",href:"",children:"kimi"}),"归纳总结"]})]})},K=()=>{let[e,t]=(0,n.useState)(!1),[a,d]=(0,n.useState)("month"),[c,u]=(0,n.useState)(O()().startOf("year").format("YYYY-MM-DD")),[h,p]=(0,n.useState)(O()().format("YYYY-MM-DD")),[m,x]=(0,n.useState)([]),f=(0,n.useRef)(),y=(0,n.useRef)(),{data:j,isLoading:v,error:b,loadFile:_}=A(),Y=e=>{let t=f.current[f.current.length-1];if(!t)return;let a=e.map(e=>({date_at_buy:e.date,value_at_buy:e.value,pe_at_buy:e.pe,date_at_sell:t.date,value_at_sell:t.value,pe_at_sell:t.pe}));x([...y.current,...a].map((e,t)=>{let{totalGain:a,annualizedReturn:l}=z(new Date(e.date_at_buy),e.value_at_buy,new Date(e.date_at_sell),e.value_at_sell);return{...e,key:t,totalGain:a,annualizedReturn:l}}).sort((e,t)=>e.date_at_buy.localeCompare(t.date_at_buy)))};if(v)return(0,l.jsx)("p",{children:"Loading..."});if(b)return(0,l.jsxs)("p",{children:["Error: ",b]});if(!j||!e)return(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen",children:[(0,l.jsx)(U,{author:"ETF拯救世界",title:"估值对于投资同一个指数，到底有多大的作用？",href:"https://weibo.com/p/1001603901079514384913",summary:["这篇文章通过分析中证500指数过去十年的市盈率（PE）数据，探讨了估值对长期投资收益的影响。文章指出，尽管过去十年中证500的年化收益率高达23%，但这种高收益并非普遍现象，而是起始于一个极度低估的时期。作者认为，估值是决定长期收益的关键因素。","文章通过选取中证500历史上PE最高和最低的月份，以及一个平均PE的月份，对比了从这些不同估值水平买入后的收益率。结果显示，低估值买入可以带来至少20%以上的年化收益率，甚至在某些情况下高达35%。相反，高估值买入的长期收益可能不如债券。","作者强调，耐心等待低估时机买入，而不是在高估时急于抢反弹，是实现长期稳定收益的策略。文章最后提到，当前中证500的PE为45，比十年平均PE高出17%，认为这不是一个理想的买入时机，建议投资者继续等待更合理的价格。","总结来说，文章的核心观点是：估值对长期投资收益有重大影响，投资者应耐心等待低估值时机，以实现更高的年化收益率。"]}),(0,l.jsx)(J,{onFileLoad:e=>{_(e),t(!0)}})]});let S=(j?"day"===a?j.days:"month"===a?j.months:j.years:null).filter(e=>new Date(e.date)>new Date(c));f.current=S,y.current=m;let k=I(S,f,Y);return(0,l.jsxs)("div",{children:[(0,l.jsx)(s.ZP,{type:"primary",icon:(0,l.jsx)(i.Z,{}),onClick:()=>{t(!1),u(O()().startOf("year").format("YYYY-MM-DD")),p(O()().format("YYYY-MM-DD")),x([]),d("month")},style:{marginBottom:"20px"},children:"Go Back"}),(0,l.jsx)(r.Z,{...k,title:j.name}),(0,l.jsx)(E,{timeFrame:a,onTimeFrameChange:e=>d(e),onDateRangeChange:(e,t)=>{u(e),p(t)}}),(0,l.jsxs)(o.Z,{size:"middle",children:[(0,l.jsx)(g,{name:"Add transactions",data:j?j.days:null,onOk:Y}),(0,l.jsx)(C,{})]}),(0,l.jsx)(D,{dataSource:m,setDataSource:x})]})};function q(){return(0,l.jsx)("div",{className:"flex flex-col",children:(0,l.jsx)("main",{className:"flex-grow bg-white w-auto p-10",children:(0,l.jsx)(K,{})})})}}},function(e){e.O(0,[990,337,508,609,971,23,744],function(){return e(e.s=8855)}),_N_E=e.O()}]);