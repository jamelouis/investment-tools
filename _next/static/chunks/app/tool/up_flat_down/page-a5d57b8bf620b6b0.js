(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[288],{76713:function(t,e,a){Promise.resolve().then(a.bind(a,9618))},9618:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return u}});var n=a(11601),d=a(36742),l=a(6459),r=a(25357),s=t=>{let{up:e,flat:a,down:d}=t,s=(0,l.useRef)();return!function(t,e){let{up:a,flat:n,down:d,marginLeft:l=100,marginTop:r=20,width:s=1e3,height:c=40,upColor:o="#F44336",flatColor:i="#5f5f5f",downColor:h="#4CAF50",fontSize:p="20px",upText:u="涨",downText:f="跌",showText:x=!0}=e,m=a+n+d,g=Math.floor(a/m*s),y=Math.floor(n/m*s),w=Math.floor(d/m*s),j=t.append("g").attr("transform","translate(".concat(l,",").concat(r,")"));j.append("path").attr("d","M0 0 a 10 10, 0, 0, 0, 0 ".concat(c," h ").concat(w-5," l 10 -").concat(c," z")).attr("fill",h).attr("stroke","none"),j.append("path").attr("d","M ".concat(w," ").concat(c," h ").concat(y-5," l 10 -").concat(c," h ").concat(-y+5," z")).attr("fill",i).attr("stroke","none"),j.append("path").attr("d","M ".concat(w+y," ").concat(c," h ").concat(g," a 10 10, 0, 0, 0, 0 -").concat(c," h ").concat(-g+10," z")).attr("fill",o).attr("stroke","none"),x&&(j.append("text").attr("x",0).attr("y",c+32).attr("dy","0.35em").attr("text-anchor","start").attr("fill",h).style("font-size",p).text("".concat(f," ").concat(d)),j.append("text").attr("x",s).attr("y",c+32).attr("dy","0.35em").attr("text-anchor","end").attr("fill",o).style("font-size",p).text("".concat(a," ").concat(u)))}(r.Ys(s.current).attr("width",1200).attr("height",120).attr("viewBox",[0,0,1200,120]).attr("style","max-width: 100%; height: auto;"),{up:e,flat:a,down:d,upText:"涨",downText:"跌",fontSize:"32px"}),(0,n.jsx)("svg",{ref:s})},c=a(70311),o=a(33371),i=a(41068),h=t=>{let{data:e,yField:a}=t;return(0,n.jsxs)("div",{children:[(0,n.jsx)(o.Z,{height:180,autoFit:!0,inset:45.5,data:e,boxType:"boxplot",yField:a,coordinate:{transform:[{type:"transpose"}]},style:{boxFill:"#aaa",pointStroke:"#000"}}),(0,n.jsx)(i.Z,{data:e,style:{inset:.5},binField:a,channel:"count",binNumber:20})]})};let p=(0,d.eI)("https://ortnrxgwpiizulknfdgr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ydG5yeGd3cGlpenVsa25mZGdyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjM2ODc2MDcsImV4cCI6MjAzOTI2MzYwN30.zbPUOJkwzyPpB5QJEaGpr13Ro3u_3S86cdLnpxPNFV4");function u(){let[t,e]=(0,l.useState)([{date:"2024-08-13",up:3729,flat:231,down:1377}]),[a,d]=(0,l.useState)([]);if((0,l.useEffect)(()=>{e([{date:"2024-08-14",up:1370,flat:224,down:3744},{date:"2024-08-15",up:3867,flat:195,down:1276},{date:"2024-08-13",up:3729,flat:231,down:1377},{date:"2024-08-16",up:1670,flat:138,down:3530},{date:"2024-08-19",up:1912,flat:251,down:3174},{date:"2024-08-21",up:1849,flat:254,down:3236},{date:"2024-08-20",up:669,flat:78,down:4591},{date:"2024-08-22",up:777,flat:94,down:4468}].sort((t,e)=>t.date.localeCompare(e.date))),console.log("i fire once")},[p]),null==t||0==t.length)return(0,n.jsx)("p",{children:"Loading ..."});let{up:r,flat:o,down:i}=t[t.length-1],u=function(t){let e=[];return t.forEach(t=>{e.push({date:t.date,value:t.up,name:"up"}),e.push({date:t.date,value:t.flat,name:"flat"}),e.push({date:t.date,value:t.down,name:"down"})}),e}(t),f=a.length>0?a[0].metadata.filter(t=>t.current_year_percent<8e3):[],x=a.length>0?a[0].date:"invalid date";return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"container mx-auto p-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,n.jsxs)("div",{className:"bg-gray-200 p-4 rounded-lg shadow",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-2 text-center",children:"涨跌统计"}),(0,n.jsxs)("div",{className:"bg-white rounded",children:[(0,n.jsx)("div",{className:"flex justify-center",children:(0,n.jsx)(s,{up:r||0,flat:o||0,down:i||0})}),(0,n.jsx)(c.Z,{xField:"date",legend:{color:{range:["#F44336","#5f5f5f","#4CAF50","#4CAF50"]}},scale:{color:{range:["#F44336","#5f5f5f","#4CAF50","#4CAF50"]}},children:[{data:u,type:"line",yField:"value",colorField:"name",seriesField:"name",axis:{y:{position:"right"}},style:{lineWidth:2}}]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"bg-gray-200 p-4 rounded-lg shadow",children:[(0,n.jsxs)("h2",{className:"text-lg font-semibold mb-2",children:[x,"日涨跌幅"]}),(0,n.jsx)("div",{className:" bg-white rounded",children:(0,n.jsx)(h,{data:f,yField:"percent"})})]}),(0,n.jsxs)("div",{className:"bg-gray-200 p-4 rounded-lg shadow",children:[(0,n.jsxs)("h2",{className:"text-lg font-semibold mb-2",children:["年初至",x,"涨跌幅"]}),(0,n.jsx)("div",{className:"bg-white rounded",children:(0,n.jsx)(h,{data:f,yField:"current_year_percent"})})]})]})]})})})}}},function(t){t.O(0,[838,495,723,752,357,267,570,833,744],function(){return t(t.s=76713)}),_N_E=t.O()}]);