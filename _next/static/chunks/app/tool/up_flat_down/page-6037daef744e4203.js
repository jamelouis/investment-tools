(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[288],{76713:function(t,e,a){Promise.resolve().then(a.bind(a,9618))},9618:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return u}});var n=a(11601),l=a(5407),s=a(6459),c=a(76700),r=t=>{let{up:e,flat:a,down:l}=t,r=(0,s.useRef)();return!function(t,e){let{up:a,flat:n,down:l,marginLeft:s=0,marginTop:c=0,scale:r=.8,width:o=1e3,height:d=40,upColor:i="#F44336",flatColor:h="#5f5f5f",downColor:p="#4CAF50",fontSize:u="20px",upText:f="涨",downText:x="跌",showText:m=!0}=e,g=a+n+l,y=Math.floor(a/g*o),j=Math.floor(n/g*o),b=Math.floor(l/g*o),F=t.append("g").attr("transform","translate(".concat(s,",").concat(c,") scale(").concat(r,")"));F.append("path").attr("d","M0 0 a 10 10, 0, 0, 0, 0 ".concat(d," h ").concat(b-5," l 10 -").concat(d," z")).attr("fill",p).attr("stroke","none"),F.append("path").attr("d","M ".concat(b," ").concat(d," h ").concat(j-5," l 10 -").concat(d," h ").concat(-j+5," z")).attr("fill",h).attr("stroke","none"),F.append("path").attr("d","M ".concat(b+j," ").concat(d," h ").concat(y," a 10 10, 0, 0, 0, 0 -").concat(d," h ").concat(-y+10," z")).attr("fill",i).attr("stroke","none"),m&&(F.append("text").attr("x",0).attr("y",d+32).attr("dy","0.35em").attr("text-anchor","start").attr("fill",p).style("font-size",u).text("".concat(x," ").concat(l)),F.append("text").attr("x",o).attr("y",d+32).attr("dy","0.35em").attr("text-anchor","end").attr("fill",i).style("font-size",u).text("".concat(a," ").concat(f)))}(c.Ys(r.current).attr("width",400).attr("height",100),{up:e,flat:a,down:l,marginLeft:20,marginTop:20,scale:400/1200,upText:"涨",downText:"跌",fontSize:"32px"}),(0,n.jsx)("svg",{ref:r})},o=a(99550),d=a(18137),i=a(15950),h=t=>{let{data:e,yField:a}=t;return(0,n.jsxs)("div",{children:[(0,n.jsx)(d.Z,{height:180,autoFit:!0,inset:45.5,data:e,boxType:"boxplot",yField:a,coordinate:{transform:[{type:"transpose"}]},style:{boxFill:"#aaa",pointStroke:"#000"}}),(0,n.jsx)(i.Z,{data:e,style:{inset:.5},binField:a,channel:"count",binNumber:20})]})};let p=(0,l.eI)("https://ortnrxgwpiizulknfdgr.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im9ydG5yeGd3cGlpenVsa25mZGdyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjM2ODc2MDcsImV4cCI6MjAzOTI2MzYwN30.zbPUOJkwzyPpB5QJEaGpr13Ro3u_3S86cdLnpxPNFV4");function u(){let[t,e]=(0,s.useState)([{date:"2024-08-13",up:3729,flat:231,down:1377}]),[a,l]=(0,s.useState)([]);if((0,s.useEffect)(()=>{(async()=>{let{data:t,error:a}=await p.from("stock_stats").select("*");console.log(a,t),a?console.log("error",a):e(t.sort((t,e)=>t.date.localeCompare(e.date)))})(),(async()=>{let{data:t,error:e}=await p.from("percent").select("*");console.log(t,e),e?console.log(e):l(t)})(),console.log("i fire once")},[p]),null==t||0==t.length)return(0,n.jsx)("p",{children:"Loading ..."});let{up:c,flat:d,down:i}=t[t.length-1],u=function(t){let e=[];return t.forEach(t=>{e.push({date:t.date,value:t.up,name:"up"}),e.push({date:t.date,value:t.flat,name:"flat"}),e.push({date:t.date,value:t.down,name:"down"})}),e}(t),f=a.length>0?a[0].metadata.filter(t=>t.current_year_percent<8e3):[],x=a.length>0?a[0].date:"invalid date";return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("div",{className:"container mx-auto p-4",children:(0,n.jsxs)("div",{className:"grid grid-cols-1 gap-4",children:[(0,n.jsxs)("div",{className:"bg-gray-200 p-4 rounded-lg shadow",children:[(0,n.jsx)("h2",{className:"text-lg font-semibold mb-2 text-center",children:"涨跌统计"}),(0,n.jsxs)("div",{className:"bg-white rounded",children:[(0,n.jsx)("div",{className:"flex flex-columns justify-center",children:(0,n.jsx)(r,{up:c||0,flat:d||0,down:i||0})}),(0,n.jsx)(o.Z,{xField:"date",legend:{color:{range:["#F44336","#5f5f5f","#4CAF50","#4CAF50"]}},scale:{color:{range:["#F44336","#5f5f5f","#4CAF50","#4CAF50"]}},children:[{data:u,type:"line",yField:"value",colorField:"name",seriesField:"name",axis:{y:{position:"right"}},style:{lineWidth:2}}]})]})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,n.jsxs)("div",{className:"bg-gray-200 p-4 rounded-lg shadow",children:[(0,n.jsxs)("h2",{className:"text-lg font-semibold mb-2",children:[x,"日涨跌幅"]}),(0,n.jsx)("div",{className:" bg-white rounded",children:(0,n.jsx)(h,{data:f,yField:"percent"})})]}),(0,n.jsxs)("div",{className:"bg-gray-200 p-4 rounded-lg shadow",children:[(0,n.jsxs)("h2",{className:"text-lg font-semibold mb-2",children:["年初至",x,"涨跌幅"]}),(0,n.jsx)("div",{className:"bg-white rounded",children:(0,n.jsx)(h,{data:f,yField:"current_year_percent"})})]})]})]})})})}}},function(t){t.O(0,[838,976,413,570,833,744],function(){return t(t.s=76713)}),_N_E=t.O()}]);